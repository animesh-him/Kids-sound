<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Listen & Tap ‚Äî Multilingual Buttons (Voice-Verified)</title>
<style>
  body{margin:0;font-family:system-ui,Segoe UI,Arial;background:#fff7f0;color:#222}
  .wrap{max-width:1000px;margin:0 auto;padding:16px}
  .langbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
  .lbtn{border:1px solid #1f2937;background:#ffffff;color:#111827;
        padding:8px 14px;border-radius:999px;cursor:pointer;font-weight:700;letter-spacing:.02em}
  .lbtn.active{background:#111827;color:#ffffff;border-color:#111827}
  .hud{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
  .pill{background:#f3f3f3;padding:8px 12px;border-radius:16px;display:inline-flex;gap:8px;align-items:center}
  .btn{border:0;border-radius:999px;padding:10px 16px;font-weight:700;cursor:pointer;background:#111827;color:#fff}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:10px}
  @media (max-width: 520px){ .grid{ grid-template-columns:repeat(3,1fr);} }
  .cell{border:1px solid #ddd;border-radius:10px;padding:14px 12px;font-size:18px;
        display:flex;align-items:center;justify-content:flex-start;gap:10px;background:#fff}
  .dot{display:inline-block;width:18px;height:18px;border-radius:50%}
  .muted{color:#666}
</style>
<body><div class="wrap">
<h1>üëÇ Listen & Tap ‚Äî Multilingual (Voice-Verified)</h1>
<p class="muted">Only languages with a working voice on your device are shown. 
Tiles stay in <b>English</b>; prompts are spoken in the selected language. 
Default language is <b>English</b>.</p>

<div class="langbar" id="langbar"></div>

<div class="hud">
  <span class="pill">Score: <b id="s">0</b></span>
  <span class="pill">‚è±Ô∏è <b id="t">60</b>s</span>
  <button class="btn" id="say">üó£Ô∏è Speak</button>
  <button class="btn" id="start">Start</button>
  <button class="btn" id="mute">üîä Sound: On</button>
</div>

<div id="grid" class="grid"></div>
<p id="status" class="pill">Status: loading voices‚Ä¶</p>

<script>
// Colors (12)
var COLORS=[['red','üî¥','#e63946',440],['blue','üîµ','#277da1',520],
 ['green','üü¢','#2a9d8f',600],['yellow','üü°','#ffd166',700],
 ['orange','üü†','#f4a261',740],['purple','üü£','#6a4c93',780],
 ['pink','ü©∑','#ff6ea9',820],['brown','üü§','#8d5524',860],
 ['black','‚ö´','#111111',400],['white','‚ö™','#eeeeee',920],
 ['violet','üü£','#7f00ff',840],['indigo','üîµ','#3f00ff',500]];

// Languages to test (with expected voice tags)
var LANG_CANDIDATES = [
  ['en','English',['en-IN','en-GB','en-US','en']],
  ['bn','Bengali',['bn-IN','bn-BD','bn']],
  ['hi','Hindi',['hi-IN','hi']],
  ['kn','Kannada',['kn-IN','kn']],
  ['ta','Tamil',['ta-IN','ta']],
  ['te','Telugu',['te-IN','te']],
  ['gu','Gujarati',['gu-IN','gu']],
  ['ja','Japanese',['ja-JP','ja']],
  ['de','German',['de-DE','de']],
  ['ko','Korean',['ko-KR','ko']],
  ['fr','French',['fr-FR','fr']],
  ['es','Spanish',['es-ES','es-MX','es']]
];

// Spoken names
var L10N={
 en:{red:'red',blue:'blue',green:'green',yellow:'yellow',orange:'orange',purple:'purple',
     pink:'pink',brown:'brown',black:'black',white:'white',violet:'violet',indigo:'indigo'},
 bn:{red:'‡¶≤‡¶æ‡¶≤',blue:'‡¶®‡ßÄ‡¶≤',green:'‡¶∏‡¶¨‡ßÅ‡¶ú',yellow:'‡¶π‡¶≤‡ßÅ‡¶¶',orange:'‡¶ï‡¶Æ‡¶≤‡¶æ',purple:'‡¶¨‡ßá‡¶ó‡ßÅ‡¶®‡¶ø',pink:'‡¶ó‡ßã‡¶≤‡¶æ‡¶™‡¶ø',
     brown:'‡¶¨‡¶æ‡¶¶‡¶æ‡¶Æ‡¶ø',black:'‡¶ï‡¶æ‡¶≤‡ßã',white:'‡¶∏‡¶æ‡¶¶‡¶æ',violet:'‡¶ú‡¶æ‡¶Æ‡ßÅ‡¶®‡¶ø',indigo:'‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ó‡ßã'},
 hi:{red:'‡§≤‡§æ‡§≤',blue:'‡§®‡•Ä‡§≤‡§æ',green:'‡§π‡§∞‡§æ',yellow:'‡§™‡•Ä‡§≤‡§æ',orange:'‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä',purple:'‡§¨‡•à‡§Ç‡§ó‡§®‡•Ä',pink:'‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä',
     brown:'‡§≠‡•Ç‡§∞‡§æ',black:'‡§ï‡§æ‡§≤‡§æ',white:'‡§∏‡§´‡•á‡§¶',violet:'‡§ú‡§æ‡§Æ‡•Å‡§®‡•Ä',indigo:'‡§®‡•Ä‡§≤'},
 kn:{red:'‡≤ï‡≥Ü‡≤Ç‡≤™‡≥Å',blue:'‡≤®‡≥Ä‡≤≤‡≤ø',green:'‡≤π‡≤∏‡≤ø‡≤∞‡≥Å',yellow:'‡≤π‡≤≥‡≤¶‡≤ø',orange:'‡≤ï‡≤ø‡≤§‡≥ç‡≤§‡≤≥‡≥Ü',purple:'‡≤®‡≥á‡≤∞‡≤≥‡≥Ü',pink:'‡≤ó‡≥Å‡≤≤‡≤æ‡≤¨‡≤ø',
     brown:'‡≤ï‡≤Ç‡≤¶‡≥Å',black:'‡≤ï‡≤™‡≥ç‡≤™‡≥Å',white:'‡≤¨‡≤ø‡≤≥‡≤ø',violet:'‡≤µ‡≤Ø‡≥ä‡≤≤‡≥Ü‡≤ü‡≥ç',indigo:'‡≤á‡≤Ç‡≤°‡≤ø‡≤ó‡≥ã'},
 ta:{red:'‡Æö‡Æø‡Æµ‡Æ™‡Øç‡Æ™‡ØÅ',blue:'‡Æ®‡ØÄ‡Æ≤‡ÆÆ‡Øç',green:'‡Æ™‡Æö‡Øç‡Æö‡Øà',yellow:'‡ÆÆ‡Æû‡Øç‡Æö‡Æ≥‡Øç',orange:'‡ÆÜ‡Æ∞‡Æû‡Øç‡Æö‡ØÅ',purple:'‡Æä‡Æ§‡Ææ',pink:'‡Æá‡Æ≥‡Æû‡Øç‡Æö‡Æø‡Æµ‡Æ™‡Øç‡Æ™‡ØÅ',
     brown:'‡Æ™‡Æ¥‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ',black:'‡Æï‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ',white:'‡Æµ‡ØÜ‡Æ≥‡Øç‡Æ≥‡Øà',violet:'‡Æµ‡Øà‡Æ≤‡ØÜ‡Æü‡Øç',indigo:'‡Æá‡Æ£‡Øç‡Æü‡Æø‡Æï‡Øã'},
 te:{red:'‡∞é‡∞∞‡±Å‡∞™‡±Å',blue:'‡∞®‡±Ä‡∞≤‡∞Ç',green:'‡∞Ü‡∞ï‡±Å‡∞™‡∞ö‡±ç‡∞ö',yellow:'‡∞™‡∞∏‡±Å‡∞™‡±Å',orange:'‡∞®‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ú',purple:'‡∞ä‡∞¶‡±Å',pink:'‡∞ó‡±Å‡∞≤‡∞æ‡∞¨‡±Ä',
     brown:'‡∞ó‡±ã‡∞ß‡±Å‡∞Æ',black:'‡∞®‡∞≤‡±Å‡∞™‡±Å',white:'‡∞§‡±Ü‡∞≤‡±Å‡∞™‡±Å',violet:'‡∞µ‡∞Ø‡±ä‡∞≤‡±Ü‡∞ü‡±ç',indigo:'‡∞á‡∞Ç‡∞°‡∞ø‡∞ó‡±ã'},
 gu:{red:'‡™≤‡™æ‡™≤',blue:'‡™µ‡™æ‡™¶‡™≥‡´Ä',green:'‡™≤‡´Ä‡™≤‡´ã',yellow:'‡™™‡´Ä‡™≥‡´ã',orange:'‡™®‡™æ‡™∞‡™Ç‡™ó‡´Ä',purple:'‡™ú‡™æ‡™Ç‡™¨‡™≤‡´Ä',pink:'‡™™‡™ø‡™Ç‡™ï',
     brown:'‡™§‡™™‡™ñ‡´Ä‡™∞',black:'‡™ï‡™æ‡™≥‡´ã',white:'‡™∏‡™´‡´á‡™¶',violet:'‡™µ‡™æ‡™Ø‡´ã‡™≤‡´á‡™ü',indigo:'‡™á‡™®‡´ç‡™°‡™ø‡™ó‡´ã'},
 ja:{red:'Ëµ§',blue:'Èùí',green:'Á∑ë',yellow:'ÈªÑ',orange:'„Ç™„É¨„É≥„Ç∏',purple:'Á¥´',pink:'„Éî„É≥„ÇØ',
     brown:'Ëå∂Ëâ≤',black:'Èªí',white:'ÁôΩ',violet:'„Éê„Ç§„Ç™„É¨„ÉÉ„Éà',indigo:'„Ç§„É≥„Éá„Ç£„Ç¥'},
 de:{red:'rot',blue:'blau',green:'gr√ºn',yellow:'gelb',orange:'orange',purple:'lila',pink:'rosa',
     brown:'braun',black:'schwarz',white:'wei√ü',violet:'violett',indigo:'indigo'},
 ko:{red:'Îπ®Í∞ï',blue:'ÌååÎûë',green:'Ï¥àÎ°ù',yellow:'ÎÖ∏Îûë',orange:'Ï£ºÌô©',purple:'Î≥¥Îùº',pink:'Î∂ÑÌôç',
     brown:'Í∞àÏÉâ',black:'Í≤ÄÏ†ï',white:'ÌïòÏñë',violet:'Î∞îÏù¥Ïò¨Î†õ',indigo:'Ïù∏ÎîîÍ≥†'},
 fr:{red:'rouge',blue:'bleu',green:'vert',yellow:'jaune',orange:'orange',purple:'violet',pink:'rose',
     brown:'marron',black:'noir',white:'blanc',violet:'violet',indigo:'indigo'},
 es:{red:'rojo',blue:'azul',green:'verde',yellow:'amarillo',orange:'naranja',purple:'morado',pink:'rosa',
     brown:'marr√≥n',black:'negro',white:'blanco',violet:'violeta',indigo:'√≠ndigo'}
};

var AC=null, soundOn=true, voices=[], voice=null, currentLang='en';
function ensureAC(){try{if(!AC){AC=new (window.AudioContext||window.webkitAudioContext)();} if(AC.state==='suspended'){AC.resume();}}catch(e){}}
function speak(text){if(!soundOn||!voice) return; var u=new SpeechSynthesisUtterance(text);u.voice=voice;u.rate=1;u.pitch=1;window.speechSynthesis.cancel();window.speechSynthesis.speak(u);}
function nameFor(key){return (L10N[currentLang]||L10N.en)[key]||key;}

// Game
var playing=false,secs=60,score=0,target=0,timer=null;
var grid=document.getElementById('grid'),statusEl=document.getElementById('status');
function updateStatus(m){statusEl.textContent='Status: '+m;}
function shuffle(a){for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=a[i];a[i]=a[j];a[j]=t;}return a;}
function nextRound(){target=Math.floor(Math.random()*COLORS.length);speak(nameFor(COLORS[target][0]));rebuildTiles();}
function rebuildTiles(){grid.innerHTML='';shuffle(COLORS.slice()).forEach(function(item){var d=document.createElement('button');d.className='cell';d.innerHTML='<span class="dot" style="background:'+item[2]+'"></span> '+item[0]+' '+item[1];d.onclick=function(){choose(item[0]===COLORS[target][0]);};grid.appendChild(d);});}
function choose(ok){if(!playing)return;if(ok){score++;document.getElementById('s').textContent=score;nextRound();}else{score=Math.max(0,score-1);document.getElementById('s').textContent=score;}}

// Events
document.getElementById('say').onclick=function(){speak(nameFor(COLORS[target][0]));};
document.getElementById('start').onclick=function(){ensureAC();playing=true;secs=60;score=0;document.getElementById('s').textContent=0;document.getElementById('t').textContent=secs;nextRound();if(timer)clearInterval(timer);timer=setInterval(function(){secs--;document.getElementById('t').textContent=secs;if(secs<=0){clearInterval(timer);playing=false;alert('Time! Score '+score);}},1000);};
document.getElementById('mute').onclick=function(e){soundOn=!soundOn;e.target.textContent=soundOn?'üîä Sound: On':'üîá Sound: Off';};

// Build language buttons only if voices exist
function refreshVoices(){voices=window.speechSynthesis.getVoices();var bar=document.getElementById('langbar');bar.innerHTML='';LANG_CANDIDATES.forEach(function(cfg){var code=cfg[0],label=cfg[1],tags=cfg[2];var v=voices.find(vc=>tags.some(t=>vc.lang.toLowerCase().startsWith(t.toLowerCase())));if(v){var b=document.createElement('button');b.className='lbtn';b.textContent=label;b.onclick=function(){currentLang=code;voice=v;Array.from(bar.children).forEach(x=>x.classList.remove('active'));b.classList.add('active');updateStatus('Language: '+label+' ‚Ä¢ '+(v.name||v.lang));if(playing)nextRound();};bar.appendChild(b);if(code==='en'){b.classList.add('active');currentLang='en';voice=v;}}});}
window.speechSynthesis.onvoiceschanged=refreshVoices;setTimeout(refreshVoices,200);
</script>
</div></body>
</html>
