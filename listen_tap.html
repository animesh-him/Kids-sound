<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Listen & Tap ‚Äî Multilingual (Final v2)</title>
<style>
  *,*::before,*::after{ box-sizing:border-box }
  html,body{ height:100% }
  body{ margin:0; overflow-x:hidden; font-family:system-ui,Segoe UI,Arial; background:#fff7f0; color:#222 }

  .wrap{ max-width:1000px; width:100%; margin:0 auto; padding:12px }

  .langbar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:8px 0 }
  .lbtn{ border:1px solid #1f2937; background:#fff; color:#111827; padding:8px 14px; border-radius:999px; cursor:pointer; font-weight:700; letter-spacing:.02em }
  .lbtn.active{ background:#111827; color:#fff; border-color:#111827 }

  .hud{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:8px 0 }
  .pill{ background:#f3f3f3; padding:8px 12px; border-radius:16px; display:inline-flex; gap:8px; align-items:center }
  .btn{ border:0; border-radius:999px; padding:10px 16px; font-weight:700; cursor:pointer; background:#111827; color:#fff }

  .grid{
    display:grid;
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:10px;
    width:100%;
  }
  @media (min-width: 760px){
    .grid{ grid-template-columns:repeat(4, minmax(0,1fr)); }
  }

  .cell{
    width:100%;
    border:1px solid #ddd;
    border-radius:12px;
    padding:22px 12px;
    min-height:86px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    font-size:26px;
  }

  .label3d{ font-weight:900; letter-spacing:.03em; text-transform:uppercase; }
  .label3d.white{ color:#fff; text-shadow:
      0 1px 0 rgba(0,0,0,.25),
      0 2px 0 rgba(0,0,0,.2),
      0 3px 0 rgba(0,0,0,.15),
      0 4px 0 rgba(0,0,0,.1),
      0 6px 6px rgba(0,0,0,.35);
  }
  .label3d.black{ color:#111; text-shadow:
      0 1px 0 rgba(255,255,255,.45),
      0 2px 0 rgba(255,255,255,.35),
      0 3px 0 rgba(255,255,255,.25),
      0 4px 0 rgba(255,255,255,.15),
      0 6px 6px rgba(0,0,0,.2);
  }

  .muted{ color:#666 }
  footer.smallnote{ margin-top:14px; color:#666; font-size:13px; line-height:1.35 }
</style>
<body>
<div class="wrap">
  <h1>üëÇ Listen & Tap ‚Äî Multilingual</h1>
  <p class="muted">Spoken prompt uses the selected language; tiles show <b>English</b> color names with <b>3D text</b> on solid color blocks.</p>

  <div class="langbar" id="langbar"></div>

  <div class="hud">
    <span class="pill">Score: <b id="s">0</b></span>
    <span class="pill">‚è±Ô∏è <b id="t">60</b>s</span>
    <button class="btn" id="say">üó£Ô∏è Speak</button>
    <button class="btn" id="start">Start</button>
    <button class="btn" id="mute">üîä Sound: On</button>
  </div>

  <div id="grid" class="grid"></div>
  <p id="status" class="pill">Status: Press Start to begin!</p>

  <footer class="smallnote">
    ‚ÑπÔ∏è Note: If you install <b>Google Speech Services</b> and add Bengali, Gujarati, Spanish, etc. as a <i>system language</i>, then Chrome can use a real native voice for that language.<br>
    üí¨ If you don‚Äôt see your language available, comment on the Games webpage ‚Äî I will include it. Have fun!
  </footer>
</div>

<script>
/* ---- Colors ---- */
var COLORS=[
  ['red','#e63946'],['blue','#277da1'],['green','#2a9d8f'],['yellow','#ffd166'],
  ['orange','#f4a261'],['pink','#ff6ea9'],['brown','#8d5524'],['black','#111111'],
  ['white','#eeeeee'],['violet','#7F00FF'],['indigo','#4B0082']
];

/* ---- End-game messages ---- */
var END_LOW=[
  "You are my buddy ‚ù§Ô∏è Let's play again, shall we?",
  "Great try! Next round will be even better.",
  "You did wonderful ‚Äî score doesn‚Äôt matter, fun does!",
  "Cheer up champ! Let‚Äôs go again soon.",
  "Every tap counts, you‚Äôre improving already!",
  "You are awesome ‚Äî the score is just a number.",
  "Keep shining, you‚Äôre my favorite player!",
  "Smile! Games are for joy, not just points.",
  "Fantastic spirit! Let‚Äôs try one more time.",
  "High five ü§ö You played with heart!",
  "Your energy is amazing ‚Äî keep tapping!",
  "Friend, you‚Äôre building skills every round.",
  "No worries ‚Äî we‚Äôre in this together!",
  "You brighten the game ‚Äî keep going!",
  "A little score, but a big heart!",
  "The fun matters more than the score!",
  "Play again? I‚Äôll cheer you louder!",
  "Next time will be your round!",
  "You‚Äôre a true buddy gamer!",
  "Keep that smile, champion!"
];
var END_HIGH=[
  "Wow! You crushed it! üèÜ",
  "Amazing score ‚Äî you‚Äôre a star!",
  "Champion vibes only ‚ú® Keep it up!",
  "Fantastic! That‚Äôs true focus.",
  "You‚Äôre unstoppable ‚Äî what a round!",
  "Incredible tapping skills üëè",
  "Brilliant memory and speed!",
  "Legendary score ‚Äî salute!",
  "Excellent! You‚Äôve set a new bar.",
  "Superb ‚Äî you made me proud!",
  "Victory dance time üíÉüï∫",
  "You‚Äôre glowing with success!",
  "A masterpiece of tapping!",
  "Bravo! A champion indeed.",
  "High score, high spirit!",
  "Unstoppable energy ‚Äî wow!",
  "Keep rocking superstar!",
  "That‚Äôs record-breaking speed!",
  "Phenomenal! You inspire me!",
  "Hall of fame performance!"
];

/* ---- Helpers ---- */
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* ---- Game state ---- */
var playing=false, secs=60, score=0, target=0, timer=null;
var grid=document.getElementById('grid'), statusEl=document.getElementById('status');
function updateStatus(m){ statusEl.textContent='Status: '+m; }
function shuffle(a){ for(var i=a.length-1;i>0;i--){ var j=Math.floor(Math.random()*(i+1)); var t=a[i]; a[i]=a[j]; a[j]=t; } return a; }
function labelTone(hex){ var r=parseInt(hex.substr(1,2),16),g=parseInt(hex.substr(3,2),16),b=parseInt(hex.substr(5,2),16); var L=0.2126*(r/255)+0.7152*(g/255)+0.0722*(b/255); return (L<0.55)?'white':'black'; }

/* ---- Speech ---- */
var voices=[], voice=null, currentLang='en', soundOn=true;
function speak(text){ if(!soundOn||!voice) return; var u=new SpeechSynthesisUtterance(text); u.voice=voice; window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);}
function nameFor(key){ return key; } // simplified, labels always in English

/* ---- Round control ---- */
function nextRound(){ target=Math.floor(Math.random()*COLORS.length); speak(nameFor(COLORS[target][0])); rebuildTiles(); }
function rebuildTiles(){ grid.innerHTML=''; shuffle(COLORS.slice()).forEach(function(item){ var key=item[0],bg=item[1]; var d=document.createElement('button'); d.className='cell'; d.style.background=bg; var tone=labelTone(bg); var span=document.createElement('span'); span.className='label3d '+(tone==='white'?'white':'black'); span.textContent=key.toUpperCase(); d.appendChild(span); d.onclick=function(){ choose(key===COLORS[target][0]); }; grid.appendChild(d); }); }
function choose(ok){ if(!playing) return; if(ok){ score++; document.getElementById('s').textContent=score; updateStatus('Score: '+score+' ‚Äî Great!'); nextRound(); } else { score=Math.max(0,score-1); document.getElementById('s').textContent=score; updateStatus('Score: '+score+' ‚Äî Oops, try again!'); } }

/* ---- Controls ---- */
document.getElementById('say').onclick=function(){ speak(nameFor(COLORS[target][0])); };
document.getElementById('start').onclick=function(){
  playing=true; secs=60; score=0;
  document.getElementById('s').textContent=0; document.getElementById('t').textContent=secs;
  updateStatus("Let‚Äôs play ‚Äî gently tap on me!");
  nextRound();
  if(timer) clearInterval(timer);
  timer=setInterval(function(){
    secs--; document.getElementById('t').textContent=secs;
    if(secs<=0){
      clearInterval(timer); playing=false;
      var msg=(score<5?pick(END_LOW):pick(END_HIGH));
      updateStatus("‚è∞ Time‚Äôs up! Final Score: "+score+" ‚Äî "+msg);
    }
  },1000);
};
document.getElementById('mute').onclick=function(e){ soundOn=!soundOn; e.target.textContent = soundOn? 'üîä Sound: On':'üîá Sound: Off'; };
</script>
</body>
</html>
