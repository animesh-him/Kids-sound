<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Listen & Tap ‚Äî Animals (Emoji ‚Ä¢ Labels Below ‚Ä¢ Training ‚Ä¢ Multilingual)</title>
<style>
  *,*::before,*::after{ box-sizing:border-box }
  html,body{ height:100% }
  body{ margin:0; overflow-x:hidden; font-family:system-ui,Segoe UI,Arial; background:#fff7f0; color:#222 }
  .wrap{ max-width:1000px; width:100%; margin:0 auto; padding:12px }
  .hud, .langbar, .levelbar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:8px 0 }
  .pill{ background:#f3f3f3; padding:8px 12px; border-radius:16px; display:inline-flex; gap:8px; align-items:center }
  .btn{ border:0; border-radius:999px; padding:10px 16px; font-weight:700; cursor:pointer; background:#111827; color:#fff }
  .btn.alt{ background:#0f766e }
  .lbtn{ border:1px solid #1f2937; background:#fff; color:#111827; padding:8px 14px; border-radius:999px; cursor:pointer; font-weight:700; letter-spacing:.02em }
  .lbtn.active{ background:#111827; color:#fff; border-color:#111827 }
  .lvlbtn{ border:1px solid #78350f; background:#fff; color:#78350f; padding:8px 14px; border-radius:12px; cursor:pointer; font-weight:800; letter-spacing:.02em }
  .lvlbtn.active{ background:#78350f; color:#fff; }
  .grid{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:10px; width:100% }
  @media (min-width:760px){ .grid{ grid-template-columns:repeat(4, minmax(0,1fr)); } }
  .cell{
    aspect-ratio:1/1; width:100%; border:1px solid #ddd; border-radius:14px; background:#fff;
    display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative; overflow:hidden; padding:8px;
  }
  .emoji{ flex:1; width:100%; display:flex; align-items:center; justify-content:center; font-size:clamp(80px, 12vw, 150px); line-height:1 }
  .label3d{
    margin-top:auto; margin-bottom:6px; font-weight:900; letter-spacing:.03em; text-transform:uppercase;
    font-size:clamp(14px, 3.6vw, 22px); color:#111; text-shadow:0 1px 0 rgba(255,255,255,.45),0 2px 0 rgba(255,255,255,.35),0 3px 0 rgba(255,255,255,.25),0 4px 0 rgba(255,255,255,.15),0 6px 6px rgba(0,0,0,.18);
    pointer-events:none; user-select:none;
  }
  .parrot-tile{ background: linear-gradient(180deg,#eaf8ef 0%, #d7f1df 100%); border-color:#9ad3a9; }
  .overlay{ position:fixed; inset:0; background:#fffefc; z-index:50; display:none; overflow:auto; padding:16px }
  .overlay.show{ display:block }
  .ov-head{ display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin-bottom:12px }
  .ov-title{ font-size:20px; font-weight:800 }
  .ov-actions{ display:flex; gap:8px; flex-wrap:wrap }
  .tgrid{ display:grid; gap:10px; grid-template-columns:repeat(2, minmax(0,1fr)) }
  @media (min-width:640px){ .tgrid{ grid-template-columns:repeat(3, minmax(0,1fr)); } }
  @media (min-width:900px){ .tgrid{ grid-template-columns:repeat(4, minmax(0,1fr)); } }
  .tcard{ border:1px solid #e5e7eb; border-radius:14px; background:#fff; padding:10px; display:flex; gap:10px; align-items:center }
  .ticon{ width:84px; height:84px; border-radius:12px; display:grid; place-items:center; font-size:64px; line-height:1; background:#f8fafc; border:1px solid #e5e7eb }
  .ticon.parrot{ background:linear-gradient(180deg,#eaf8ef 0%, #d7f1df 100%); border-color:#9ad3a9 }
  .tmeta{ display:flex; flex-direction:column; gap:6px; align-items:flex-start }
  .tname{ font-weight:800; letter-spacing:.02em }
  .sbtn{ border:1px solid #111; background:#111; color:#fff; border-radius:999px; padding:6px 10px; cursor:pointer; font-weight:700 }
  .muted{ color:#666 }
  footer.smallnote{ margin-top:14px; color:#666; font-size:13px; line-height:1.35 }
</style>
<body>
<div class="wrap">
  <h1>üëÇ Listen & Tap ‚Äî Animals</h1>
  <p class="muted">Tap the emoji that matches the spoken animal. <b>Level 1</b>: emoji + name below. <b>Level 2</b>: emoji only. Use <b>Training</b> to learn names in your chosen language.</p>
  <div class="langbar" id="langbar"></div>
  <div class="levelbar">
    <button class="lvlbtn active" id="lvl1">Level 1 (Labels below)</button>
    <button class="lvlbtn" id="lvl2">Level 2 (Emoji Only)</button>
  </div>
  <div class="hud">
    <span class="pill">Score: <b id="s">0</b></span>
    <span class="pill">‚è±Ô∏è <b id="t">60</b>s</span>
    <button class="btn" id="say">üó£Ô∏è Speak</button>
    <button class="btn" id="start">Start</button>
    <button class="btn" id="mute">üîä Sound: On</button>
    <button class="btn alt" id="train">üìö Training</button>
  </div>
  <div id="grid" class="grid"></div>
  <p id="status" class="pill">Status: Press Start ‚Äî <b>Let‚Äôs play, gently tap on me!</b></p>
  <footer class="smallnote">
    ‚ÑπÔ∏è For the most natural voices, install <b>Google Speech Services</b> and add your language as a system language so Chrome can use a native voice.<br>
    üí¨ If you don‚Äôt see your language available, comment on the Games webpage ‚Äî I will include it. Have fun!
  </footer>
</div>
<div class="overlay" id="training">
  <div class="ov-head">
    <div class="ov-title">üìö Training ‚Äî Learn the icons & pronunciation (<span id="trainLang">English</span>)</div>
    <div class="ov-actions">
      <button class="btn alt" id="speakAll">üîä Speak All</button>
      <button class="btn" id="closeTrain">‚úñ Close & Resume</button>
    </div>
  </div>
  <div class="tgrid" id="tgrid"></div>
</div>

<script>
var ANIMALS = [
  ['tiger','üêÖ'], ['lion','ü¶Å'], ['elephant','üêò'], ['giraffe','ü¶í'], ['zebra','ü¶ì'],
  ['horse','üêé'], ['cow','üêÑ'], ['goat','üêê'], ['dog','üêï'], ['cat','üêà'],
  ['rabbit','üêá'], ['monkey','üêí'], ['camel','üê´'], ['turtle','üê¢'],
  ['parrot','ü¶ú'], ['dolphin','üê¨']
];

var BASE_LANGS=[
  ['en','English',['en-GB','en-US','en-IN','en']],
  ['as','Assamese',['as-IN','as']],
  ['bn','Bengali',['bn-IN','bn-BD','bn']],
  ['de','German',['de-DE','de']],
  ['es','Spanish',['es-ES','es-MX','es']],
  ['fr','French',['fr-FR','fr']],
  ['gu','Gujarati',['gu-IN','gu']],
  ['hi','Hindi',['hi-IN','hi']],
  ['ja','Japanese',['ja-JP','ja']],
  ['kn','Kannada',['kn-IN','kn']],
  ['ko','Korean',['ko-KR','ko']],
  ['ml','Malayalam',['ml-IN','ml']],
  ['mr','Marathi',['mr-IN','mr']],
  ['or','Odia',['or-IN','or']],
  ['pa','Punjabi',['pa-IN','pa']],
  ['ta','Tamil',['ta-IN','ta']],
  ['te','Telugu',['te-IN','te']]
];
var LANG_CANDIDATES=(function(){var en=BASE_LANGS.find(x=>x[0]==='en');var others=BASE_LANGS.filter(x=>x[0]!=='en').sort((a,b)=>a[1].localeCompare(b[1]));return [en].concat(others);})();

var L10N={
  en:Object.fromEntries(ANIMALS.map(([k])=>[k,k])),
  bn:{tiger:'‡¶¨‡¶æ‡¶ò',lion:'‡¶∏‡¶ø‡¶Ç‡¶π',elephant:'‡¶π‡¶æ‡¶§‡¶ø',giraffe:'‡¶ú‡¶ø‡¶∞‡¶æ‡¶´',zebra:'‡¶ú‡ßá‡¶¨‡ßç‡¶∞‡¶æ',horse:'‡¶ò‡ßã‡¶°‡¶º‡¶æ',cow:'‡¶ó‡¶∞‡ßÅ',goat:'‡¶õ‡¶æ‡¶ó‡¶≤',dog:'‡¶ï‡ßÅ‡¶ï‡ßÅ‡¶∞',cat:'‡¶¨‡¶ø‡¶°‡¶º‡¶æ‡¶≤',rabbit:'‡¶ñ‡¶∞‡¶ó‡ßã‡¶∂',monkey:'‡¶¨‡¶æ‡¶®‡¶∞',camel:'‡¶â‡¶ü',turtle:'‡¶ï‡¶ö‡ßç‡¶õ‡¶™',parrot:'‡¶§‡ßã‡¶§‡¶æ',dolphin:'‡¶°‡¶≤‡¶´‡¶ø‡¶®'},
  hi:{tiger:'‡§¨‡§æ‡§ò',lion:'‡§∏‡§ø‡§Ç‡§π',elephant:'‡§π‡§æ‡§•‡•Ä',giraffe:'‡§ú‡§ø‡§∞‡§æ‡§´‡§º',zebra:'‡§ú‡§º‡•á‡§¨‡•ç‡§∞‡§æ',horse:'‡§ò‡•ã‡§°‡§º‡§æ',cow:'‡§ó‡§æ‡§Ø',goat:'‡§¨‡§ï‡§∞‡•Ä',dog:'‡§ï‡•Å‡§§‡•ç‡§§‡§æ',cat:'‡§¨‡§ø‡§≤‡•ç‡§≤‡•Ä',rabbit:'‡§ñ‡§∞‡§ó‡•ã‡§∂',monkey:'‡§¨‡§Ç‡§¶‡§∞',camel:'‡§ä‡§Å‡§ü',turtle:'‡§ï‡§õ‡•Å‡§Ü',parrot:'‡§§‡•ã‡§§‡§æ',dolphin:'‡§°‡•â‡§≤‡•ç‡§´‡§º‡§ø‡§®'},
  kn:{tiger:'‡≤π‡≥Å‡≤≤‡≤ø',lion:'‡≤∏‡≤ø‡≤Ç‡≤π',elephant:'‡≤Ü‡≤®‡≥Ü',giraffe:'‡≤ú‡≤ø‡≤∞‡≤æ‡≤´‡≥Ü',zebra:'‡≤ú‡≥Ä‡≤¨‡≥ç‡≤∞‡≤æ',horse:'‡≤ï‡≥Å‡≤¶‡≥Å‡≤∞‡≥Ü',cow:'‡≤π‡≤∏‡≥Å',goat:'‡≤Æ‡≥á‡≤ï‡≥Ü',dog:'‡≤®‡≤æ‡≤Ø‡≤ø',cat:'‡≤¨‡≥Ü‡≤ï‡≥ç‡≤ï‡≥Å',rabbit:'‡≤Æ‡≥ä‡≤≤',monkey:'‡≤ï‡≥ã‡≤§‡≤ø',camel:'‡≤í‡≤Ç‡≤ü‡≥Ü',turtle:'‡≤Ü‡≤Æ‡≥Ü',parrot:'‡≤ó‡≤ø‡≤≥‡≤ø',dolphin:'‡≤°‡≤æ‡≤≤‡≥ç‡≤´‡≤ø‡≤®‡≥ç'},
  ta:{tiger:'‡Æ™‡ØÅ‡Æ≤‡Æø',lion:'‡Æö‡Æø‡Æô‡Øç‡Æï‡ÆÆ‡Øç',elephant:'‡ÆØ‡Ææ‡Æ©‡Øà',giraffe:'‡Æú‡Æø‡Æ∞‡Ææ‡ÆÉ‡Æ™‡Øç',zebra:'‡Æµ‡Æ∞‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Æø‡Æ∞‡Øà',horse:'‡Æï‡ØÅ‡Æ§‡Æø‡Æ∞‡Øà',cow:'‡Æ™‡Æö‡ØÅ',goat:'‡ÆÜ‡Æü‡ØÅ',dog:'‡Æ®‡Ææ‡ÆØ‡Øç',cat:'‡Æ™‡ØÇ‡Æ©‡Øà',rabbit:'‡ÆÆ‡ØÅ‡ÆØ‡Æ≤‡Øç',monkey:'‡Æï‡ØÅ‡Æ∞‡Æô‡Øç‡Æï‡ØÅ',camel:'‡Æí‡Æü‡Øç‡Æü‡Æï‡ÆÆ‡Øç',turtle:'‡ÆÜ‡ÆÆ‡Øà',parrot:'‡Æï‡Æø‡Æ≥‡Æø',dolphin:'‡Æü‡Ææ‡Æ≤‡Øç‡Æ™‡Æø‡Æ©‡Øç'},
  te:{tiger:'‡∞™‡±Å‡∞≤‡∞ø',lion:'‡∞∏‡∞ø‡∞Ç‡∞π‡∞Ç',elephant:'‡∞è‡∞®‡±Å‡∞ó‡±Å',giraffe:'‡∞ú‡∞ø‡∞∞‡∞æ‡∞´‡±Ä',zebra:'‡∞ú‡±Ä‡∞¨‡±ç‡∞∞‡∞æ',horse:'‡∞ó‡±Å‡∞∞‡±ç‡∞∞‡∞Ç',cow:'‡∞Ü‡∞µ‡±Å',goat:'‡∞Æ‡±á‡∞ï',dog:'‡∞ï‡±Å‡∞ï‡±ç‡∞ï',cat:'‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞ø',rabbit:'‡∞ï‡±Å‡∞Ç‡∞¶‡±á‡∞≤‡±Å',monkey:'‡∞ï‡±ã‡∞§‡∞ø',camel:'‡∞í‡∞Ç‡∞ü‡±Ü',turtle:'‡∞§‡∞æ‡∞¨‡±á‡∞≤‡±Å',parrot:'‡∞ö‡∞ø‡∞≤‡±Å‡∞ï',dolphin:'‡∞°‡∞æ‡∞≤‡±ç‡∞´‡∞ø‡∞®‡±ç'},
  gu:{tiger:'‡™µ‡™æ‡™ò',lion:'‡™∏‡™ø‡™Ç‡™π',elephant:'‡™π‡™æ‡™•‡´Ä',giraffe:'‡™ú‡´Ä‡™∞‡™æ‡™´',zebra:'‡™ù‡´Ä‡™¨‡´ç‡™∞‡™æ',horse:'‡™ò‡´ã‡™°‡´ã',cow:'‡™ó‡™æ‡™Ø',goat:'‡™¨‡™ï‡™∞‡´Ä',dog:'‡™ï‡´Ç‡™§‡™∞‡´ã',cat:'‡™¨‡™ø‡™≤‡™æ‡™°‡´Ä',rabbit:'‡™∏‡™∏‡™≤‡´Å‡™Ç',monkey:'‡™µ‡™æ‡™Ç‡™¶‡™∞‡´Å‡™Ç',camel:'‡™ä‡™Ç‡™ü',turtle:'‡™ï‡™æ‡™ö‡™¨‡´ã',parrot:'‡™™‡´ã‡™™‡™ü',dolphin:'‡™°‡´ã‡™≤‡´ç‡™´‡™ø‡™®'},
  as:{tiger:'‡¶¨‡¶æ‡¶ò',lion:'‡¶∏‡¶ø‡¶Ç‡¶π',elephant:'‡¶π‡¶æ‡¶§‡ßÄ',giraffe:'‡¶ú‡¶ø‡ß∞‡¶æ‡¶´',zebra:'‡¶ú‡ßá‡¶¨‡ßç‡ß∞‡¶æ',horse:'‡¶ò‡ßã‡¶Å‡ß∞‡¶æ',cow:'‡¶ó‡¶æ‡¶á',goat:'‡¶õ‡¶æ‡¶ó‡¶≤‡ßÄ',dog:'‡¶ï‡ßÅ‡¶ï‡ßÅ‡ß∞',cat:'‡¶¨‡¶ø‡¶≤‡¶æ‡¶á',rabbit:'‡¶ñ‡ß∞‡¶ó‡ßã‡¶∂',monkey:'‡¶¨‡¶æ‡¶®‡ßç‡¶¶‡ß∞',camel:'‡¶â‡¶ü',turtle:'‡¶ï‡¶ö‡ßç‡¶õ‡¶™',parrot:'‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ',dolphin:'‡¶°‡¶≤‡¶´‡¶ø‡¶®'},
  ml:{tiger:'‡¥ï‡¥ü‡µÅ‡¥µ',lion:'‡¥∏‡¥ø‡¥Ç‡¥π‡¥Ç',elephant:'‡¥Ü‡¥®',giraffe:'‡¥ú‡¥ø‡¥±‡¥æ‡¥´‡µç',zebra:'‡¥∏‡µÜ‡¥¨‡µç‡¥∞',horse:'‡¥ï‡µÅ‡¥§‡¥ø‡¥∞',cow:'‡¥™‡¥∂‡µÅ',goat:'‡¥Ü‡¥ü‡µç',dog:'‡¥®‡¥æ‡¥Ø',cat:'‡¥™‡µÇ‡¥ö‡µç‡¥ö',rabbit:'‡¥Æ‡µÅ‡¥Ø‡µΩ',monkey:'‡¥ï‡µÅ‡¥∞‡¥ô‡µç‡¥ô‡µç',camel:'‡¥í‡¥ü‡µç‡¥ü‡¥ï‡¥Ç',turtle:'‡¥Ü‡¥Æ',parrot:'‡¥§‡¥§‡µç‡¥§',dolphin:'‡¥°‡µã‡µæ‡¥´‡¥ø‡µª'},
  pa:{tiger:'‡®¨‡®æ‡®ò',lion:'‡®∏‡®ø‡©∞‡®ò',elephant:'‡®π‡®æ‡®•‡©Ä',giraffe:'‡®ú‡®ø‡®∞‡®æ‡®´‡®º',zebra:'‡®ú‡®º‡©á‡®¨‡®∞‡®æ',horse:'‡®ò‡©ã‡©ú‡®æ',cow:'‡®ó‡®æ‡®Ç',goat:'‡®¨‡©±‡®ï‡®∞‡©Ä',dog:'‡®ï‡©Å‡©±‡®§‡®æ',cat:'‡®¨‡®ø‡©±‡®≤‡©Ä',rabbit:'‡®ñ‡®∞‡®ó‡©ã‡®∏‡®º',monkey:'‡®¨‡®æ‡®Ç‡®¶‡®∞',camel:'‡®ä‡®Ç‡®ü',turtle:'‡®ï‡©±‡®õ‡©Ç‡®Ü',parrot:'‡®§‡©ã‡®§‡®æ',dolphin:'‡®°‡©ã‡®≤‡®´‡®ø‡®®'},
  or:{tiger:'‡¨¨‡¨æ‡¨ò',lion:'‡¨∏‡¨ø‡¨Ç‡¨π',elephant:'‡¨π‡¨æ‡¨§‡≠Ä',giraffe:'‡¨ú‡¨ø‡¨∞‡¨æ‡¨´',zebra:'‡¨ú‡¨ø‡¨¨‡≠ç‡¨∞‡¨æ',horse:'‡¨ò‡≠ã‡¨°‡¨º‡¨æ',cow:'‡¨ó‡¨æ‡¨à',goat:'‡¨õ‡≠á‡¨≥‡¨ø',dog:'‡¨ï‡≠Å‡¨ï‡≠Å‡¨∞',cat:'‡¨¨‡¨ø‡¨≤‡¨æ‡¨°‡¨º‡¨ø',rabbit:'‡¨ñ‡¨∞‡¨ó‡≠ã‡¨∂',monkey:'‡¨¨‡¨æ‡¨®‡¨∞',camel:'‡¨â‡¨£‡≠ç‡¨ü',turtle:'‡¨ï‡¨ö‡≠ç‡¨õ‡¨™',parrot:'‡¨ü‡¨ø‡¨Ü',dolphin:'‡¨°‡¨≤‡¨´‡¨ø‡¨®'},
  mr:{tiger:'‡§µ‡§æ‡§ò',lion:'‡§∏‡§ø‡§Ç‡§π',elephant:'‡§π‡§§‡•ç‡§§‡•Ä',giraffe:'‡§ú‡§ø‡§∞‡§æ‡§´',zebra:'‡§ù‡•á‡§¨‡•ç‡§∞‡§æ',horse:'‡§ò‡•ã‡§°‡§æ',cow:'‡§ó‡§æ‡§Ø',goat:'‡§∂‡•á‡§≥‡•Ä',dog:'‡§ï‡•Å‡§§‡•ç‡§∞‡§æ',cat:'‡§Æ‡§æ‡§Ç‡§ú‡§∞',rabbit:'‡§∏‡§∏‡§æ',monkey:'‡§Æ‡§æ‡§ï‡§°',camel:'‡§â‡§Ç‡§ü',turtle:'‡§ï‡§æ‡§∏‡§µ',parrot:'‡§™‡•ã‡§™‡§ü',dolphin:'‡§°‡•â‡§≤‡•ç‡§´‡§ø‡§®'},
  ja:{tiger:'Ëôé',lion:'„É©„Ç§„Ç™„É≥',elephant:'Ë±°',giraffe:'„Ç≠„É™„É≥',zebra:'„Ç∑„Éû„Ç¶„Éû',horse:'È¶¨',cow:'Áâõ',goat:'„É§„ÇÆ',dog:'Áä¨',cat:'Áå´',rabbit:'„Ç¶„Çµ„ÇÆ',monkey:'Áåø',camel:'„É©„ÇØ„ÉÄ',turtle:'‰∫Ä',parrot:'„Ç™„Ç¶„É†',dolphin:'„Ç§„É´„Ç´'},
  de:{tiger:'Tiger',lion:'L√∂we',elephant:'Elefant',giraffe:'Giraffe',zebra:'Zebra',horse:'Pferd',cow:'Kuh',goat:'Ziege',dog:'Hund',cat:'Katze',rabbit:'Kaninchen',monkey:'Affe',camel:'Kamel',turtle:'Schildkr√∂te',parrot:'Papagei',dolphin:'Delfin'},
  ko:{tiger:'Ìò∏ÎûëÏù¥',lion:'ÏÇ¨Ïûê',elephant:'ÏΩîÎÅºÎ¶¨',giraffe:'Í∏∞Î¶∞',zebra:'ÏñºÎ£©Îßê',horse:'Îßê',cow:'ÏÜå',goat:'ÏóºÏÜå',dog:'Í∞ú',cat:'Í≥†ÏñëÏù¥',rabbit:'ÌÜ†ÎÅº',monkey:'ÏõêÏà≠Ïù¥',camel:'ÎÇôÌÉÄ',turtle:'Í±∞Î∂ÅÏù¥',parrot:'ÏïµÎ¨¥ÏÉà',dolphin:'ÎèåÍ≥†Îûò'},
  fr:{tiger:'tigre',lion:'lion',elephant:'√©l√©phant',giraffe:'girafe',zebra:'z√®bre',horse:'cheval',cow:'vache',goat:'ch√®vre',dog:'chien',cat:'chat',rabbit:'lapin',monkey:'singe',camel:'chameau',turtle:'tortue',parrot:'perroquet',dolphin:'dauphin'},
  es:{tiger:'tigre',lion:'le√≥n',elephant:'elefante',giraffe:'jirafa',zebra:'cebra',horse:'caballo',cow:'vaca',goat:'cabra',dog:'perro',cat:'gato',rabbit:'conejo',monkey:'mono',camel:'camello',turtle:'tortuga',parrot:'loro',dolphin:'delf√≠n'}
};

var voices=[], voice=null, currentLang='en', soundOn=true;
function speakText(text){ if(!soundOn || !voice || !text) return; try{ var u=new SpeechSynthesisUtterance(text); u.voice=voice; u.rate=1; u.pitch=1; window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);}catch(e){} }
function nameFor(key){ var pack=L10N[currentLang] || L10N.en; return pack[key] || L10N.en[key] || key; }

var POSITIVE=["Brilliant!","Great job!","You nailed it!","Super!","Awesome move!","Fantastic!","Spot on!","You're on fire!","Nice pick!","Keep it up!","Well done!","Perfect!","Excellent!","Sharp eyes!","Love that focus!","Crushing it!","That‚Äôs the spirit!","Beautiful tap!","You‚Äôre unstoppable!","Champion energy!"];
var TRY_AGAIN=["Almost there‚Äîtry again!","So close!","Keep going‚Äîyou‚Äôve got this!","Good effort‚Äîtry once more!","No worries, next one!","Eyes on the prize!","You can do it!","Stay sharp!","Keep tapping‚Äîpractice wins!","One more try!","We learn by trying!","No problem‚Äînext one is yours!","Steady now, you‚Äôve got it!","Take a breath and go again!","It‚Äôs all practice‚Äîwell done!","Trust your eyes!","Great spirit!","Tap again with confidence!","Strong effort!","Keep the rhythm!"];
var END_LOW=["You are my buddy ‚ù§Ô∏è Let's play again, shall we?","Great try! Next round will be even better.","You did wonderful ‚Äî score doesn‚Äôt matter, fun does!","Cheer up champ! Let‚Äôs go again soon.","Every tap counts, you‚Äôre improving already!","You are awesome ‚Äî the score is just a number.","Keep shining, you‚Äôre my favorite player!","Smile! Games are for joy, not just points.","Fantastic spirit! Let‚Äôs try one more time.","High five ü§ö You played with heart!","Your energy is amazing ‚Äî keep tapping!","Friend, you‚Äôre building skills every round.","No worries ‚Äî we‚Äôre in this together!","You brighten the game ‚Äî keep going!","A little score, but a big heart!","The fun matters more than the score!","Play again? I‚Äôll cheer you louder!","Next time will be your round!","You‚Äôre a true buddy gamer!","Keep that smile, champion!"];
var END_HIGH=["Wow! You crushed it! üèÜ","Amazing score ‚Äî you‚Äôre a star!","Champion vibes only ‚ú® Keep it up!","Fantastic! That‚Äôs true focus.","You‚Äôre unstoppable ‚Äî what a round!","Incredible tapping skills üëè","Brilliant memory and speed!","Legendary score ‚Äî salute!","Excellent! You‚Äôve set a new bar.","Superb ‚Äî you made me proud!","Victory dance time üíÉüï∫","You‚Äôre glowing with success!","A masterpiece of tapping!","Bravo! A champion indeed.","High score, high spirit!","Unstoppable energy ‚Äî wow!","Keep rocking superstar!","That‚Äôs record-breaking speed!","Phenomenal! You inspire me!","Hall of fame performance!"];
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

var playing=false, secs=60, score=0, target=0, timer=null, level=1;
var pausedForTraining=false, savedSecs=60;
var grid=document.getElementById('grid'), statusEl=document.getElementById('status');
function updateStatus(m){ statusEl.textContent='Status: '+m; }
function shuffle(a){ for(var i=a.length-1;i>0;i--){ var j=Math.floor(Math.random()*(i+1)); var t=a[i]; a[i]=a[j]; a[j]=t; } return a; }

function nextRound(){ target = Math.floor(Math.random()*ANIMALS.length); speakText(nameFor(ANIMALS[target][0])); rebuildTiles(); }
function rebuildTiles(){
  grid.innerHTML=''; var order = shuffle(ANIMALS.slice());
  order.forEach(function(item){
    var key=item[0], emoji=item[1];
    var d=document.createElement('button'); d.className='cell'; d.setAttribute('aria-label','Card: '+key);
    if(key==='parrot'){ d.classList.add('parrot-tile'); }
    var e=document.createElement('div'); e.className='emoji'; e.textContent=emoji; d.appendChild(e);
    if(level===1){ var label=document.createElement('div'); label.className='label3d'; label.textContent=(currentLang==='en'? key.toUpperCase(): nameFor(key)); d.appendChild(label); }
    d.onclick=function(){ choose(key===ANIMALS[target][0]); };
    grid.appendChild(d);
  });
}
function choose(ok){
  if(!playing) return;
  if(ok){ score++; document.getElementById('s').textContent=score; updateStatus('Score: '+score+' ‚Äî '+pick(POSITIVE)); nextRound(); }
  else { score=Math.max(0,score-1); document.getElementById('s').textContent=score; updateStatus('Score: '+score+' ‚Äî '+pick(TRY_AGAIN)); }
}

document.getElementById('say').onclick=function(){ if(playing) speakText(nameFor(ANIMALS[target][0])); };
document.getElementById('start').onclick=function(){
  playing=true; secs=60; score=0; document.getElementById('s').textContent=0; document.getElementById('t').textContent=secs;
  var startLine="Let‚Äôs play ‚Äî gently tap on me!"; updateStatus("Game started. Language: "+readableLangLabel(currentLang, voice)+" ‚Ä¢ Score: 0 ‚Äî "+startLine); speakText(startLine);
  nextRound();
  if(timer) clearInterval(timer);
  timer=setInterval(function(){
    secs--; document.getElementById('t').textContent=secs;
    if(secs<=0){ clearInterval(timer); playing=false; var msg=(score<5?pick(END_LOW):pick(END_HIGH)); var endLine="Time‚Äôs up! Final score: "+score+". "+msg; updateStatus("‚è∞ "+endLine); speakText(endLine); }
  },1000);
};
document.getElementById('mute').onclick=function(e){ soundOn=!soundOn; e.target.textContent=soundOn?'üîä Sound: On':'üîá Sound: Off'; };

document.getElementById('lvl1').onclick=function(){ level=1; this.classList.add('active'); document.getElementById('lvl2').classList.remove('active'); if(playing) rebuildTiles(); updateStatus("Level 1 (Labels below) selected. Let‚Äôs play, gently tap on me!"); };
document.getElementById('lvl2').onclick=function(){ level=2; this.classList.add('active'); document.getElementById('lvl1').classList.remove('active'); if(playing) rebuildTiles(); updateStatus("Level 2 (Emoji Only) selected. Let‚Äôs play, gently tap on me!"); };

var training = document.getElementById('training'); var tgrid = document.getElementById('tgrid');
document.getElementById('train').onclick = openTraining; document.getElementById('closeTrain').onclick = closeTraining; document.getElementById('speakAll').onclick = speakAllTraining;
function openTraining(){ if(playing){ pausedForTraining = true; savedSecs = secs; clearInterval(timer);} else { pausedForTraining = false; } buildTrainingGrid(); document.getElementById('trainLang').textContent = readableLangLabel(currentLang, voice); training.classList.add('show'); updateStatus('Training mode open ‚Äî learn the icons and pronunciation.'); }
function closeTraining(){
  training.classList.remove('show'); updateStatus('Training closed.');
  if(pausedForTraining){
    secs = savedSecs; document.getElementById('t').textContent = secs;
    timer=setInterval(function(){
      secs--; document.getElementById('t').textContent=secs;
      if(secs<=0){ clearInterval(timer); playing=false; var msg=(score<5?pick(END_LOW):pick(END_HIGH)); var endLine="Time‚Äôs up! Final score: "+score+". "+msg; updateStatus("‚è∞ "+endLine); speakText(endLine); }
    },1000);
    pausedForTraining = false; updateStatus('Training closed ‚Äî game resumed.');
  }
}
function buildTrainingGrid(){
  tgrid.innerHTML='';
  ANIMALS.forEach(function(item){
    var key=item[0], emoji=item[1];
    var card=document.createElement('div'); card.className='tcard';
    var icon=document.createElement('div'); icon.className='ticon'; if(key==='parrot') icon.classList.add('parrot'); icon.textContent=emoji;
    var meta=document.createElement('div'); meta.className='tmeta';
    var name=document.createElement('div'); name.className='tname'; name.textContent=(currentLang==='en'? key.toUpperCase(): nameFor(key));
    var speakBtn=document.createElement('button'); speakBtn.className='sbtn'; speakBtn.textContent='üîä Speak'; speakBtn.onclick=function(){ speakText(nameFor(key)); };
    meta.appendChild(name); meta.appendChild(speakBtn);
    card.appendChild(icon); card.appendChild(meta);
    tgrid.appendChild(card);
  });
}
function speakAllTraining(){
  var i=0, list=ANIMALS.slice(); if(!soundOn || !voice) return;
  function sayNext(){ if(i>=list.length) return; var key=list[i][0]; var u=new SpeechSynthesisUtterance(nameFor(key)); u.voice=voice; u.rate=1; u.pitch=1; u.onend=function(){ i++; setTimeout(sayNext,250); }; try{ window.speechSynthesis.cancel(); }catch(e){} window.speechSynthesis.speak(u); }
  sayNext();
}

var langbar=document.getElementById('langbar');
function readableLangLabel(code,v){
  if(code==='en' && v){ var L=(v.lang||'').toLowerCase(); if(L.startsWith('en-gb')) return 'English (UK)'; if(L.startsWith('en-us')) return 'English (US)'; if(L.startsWith('en-in')) return 'English (India)'; return 'English'; }
  var f=BASE_LANGS.find(x=>x[0]===code); return f?f[1]:code;
}
function refreshVoices(){
  try{ voices = window.speechSynthesis ? window.speechSynthesis.getVoices() : []; }catch(e){ voices=[]; }
  langbar.innerHTML='';
  LANG_CANDIDATES.forEach(function(cfg){
    var code=cfg[0], label=cfg[1], tags=cfg[2];
    var v = voices.find(function(vc){ return tags.some(function(t){ return (vc.lang||'').toLowerCase().startsWith(t.toLowerCase()); }); });
    if(v){
      var b=document.createElement('button'); b.className='lbtn'; b.textContent=(code==='en')?'English':label; b.dataset.code=code;
      b.onclick=function(){ currentLang=code; voice=v; Array.prototype.forEach.call(langbar.children,function(x){ x.classList.remove('active'); }); b.classList.add('active'); updateStatus('Language: '+readableLangLabel(code, v)+' ‚Ä¢ Voice: '+(v.name||v.lang)+' ‚Ä¢ Score: '+score); if(playing) nextRound(); };
      langbar.appendChild(b);
      if(code==='en' && !document.querySelector('.lbtn.active')){ b.classList.add('active'); currentLang='en'; voice=v; }
    }
  });
  if(!langbar.children.length){
    var b=document.createElement('button'); b.className='lbtn active'; b.textContent='English'; b.disabled=true; langbar.appendChild(b);
    updateStatus('No compatible voices detected. You can still play by tapping emojis.');
  }else{
    updateStatus('Voices ready ('+langbar.children.length+' languages). Press Start!');
  }
}
try{
  if(window.speechSynthesis){ window.speechSynthesis.onvoiceschanged=refreshVoices; setTimeout(refreshVoices,200); }
  else { updateStatus('Speech synthesis not available in this browser.'); }
}catch(e){ updateStatus('Speech init error.'); }
</script>
</body>
</html>
